<!DOCTYPE html>
<npdc:create-button class="np-primary-control"></npdc:create-button>
<md-whiteframe class="np-search-input md-whiteframe-z1">
  <md-input-container flex md-no-float md-autofocus class="np-search-input-input">
    <md-icon>search</md-icon>
    <input ng-model="query" placeholder="Search indicators" type="text">
  </md-input-container>
</md-whiteframe>

<div class="npdc-search">
  <md-content>

    <section>
      <npdc:loader ng-if="!feed.entries"></npdc:loader>

      <div ng-repeat="i in feed.entries | filter:query ">
        <md-content class="np-layout-list">
          <a ng-href="{{i.id}}/show" ng-repeat="title in i.titles">
            <md-list>
              <md-list-item class="md-2-line">
                <div class="md-list-item-text">
                  <h3 class="md-headline">
                    {{ title.title || i.id }}
                  </h3>
                  <h4>{{i.parameters.length || 0 }} parameter{{i.parameters.length == 1 ? "" : "s"}}</h4>
                </div>
              </md-list-item>
            </md-list>
            <md-divider></md-divider>
          </a>

        </md-content>
      </div>

      <div layout-padding>
        <div ng-if="feed.opensearch.totalResults > 0" layout layout-align="space-between center">
          <div style="line-height: 48px;">{{feed.opensearch.totalResults}} results, displaying {{ (feed.entries | filter:query).length}}</div>
          <div><md-button class="md-raised md-primary" ng-if="showNext()" ng-click="next()">More ...</md-button></div>
        </div>
        <div ng-if="feed.opensearch.totalResults == 0">No results when searching for "{{q()}}"</div>
      </div>
    </section>
  </md-content>
</div>
<md-content>

<md-content>
  <npdc:autocomplete options="options"></npdc:autocomplete>
  <h2>System: <span ng-repeat="system in ['mosj.no', 'nare']">
    <a href="?q=&filter-systems={{system}}">{{  system | t }}</a>
  </span></h2>
  
  <h4>Language: <span ng-repeat="lang in ['nb', 'en']">
    <a ng-href="?lang={{lang}}">{{ lang }}</a>
  </span></h4>

  <section class="npdc-search">
    
    <npdc:create-button class="np-primary-control"></npdc:create-button>
    
    <p>Filter: <input ng-model="query" placeholder="Filter indicators"></p>
    <ol>
    <li ng-repeat="i in feed.entries | filter:query">
      <a href="{{i.id}}/show?title={{ i.titles | title }}">
        {{ i.titles | title }}
      </a> [{{i.parameters.length || 0 }} parameter{{i.parameters.length == 1 ? "" : "s"}}]
    </li> 
    </ol>

  </section>
  
</md-content>