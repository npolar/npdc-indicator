<!DOCTYPE html>
<npdc:create-button class="np-primary-control"></npdc:create-button>
<md-whiteframe class="np-search-input md-whiteframe-z1">
  <md-input-container flex md-no-float md-autofocus class="np-search-input-input">
    <md-icon>search</md-icon>
    <input ng-model="query" placeholder="Filter" type="text">
  </md-input-container>
</md-whiteframe>

<div class="npdc-search">
  <md-content>

    <section>
      <npdc:loader ng-if="!feed.entries"></npdc:loader>

      <div ng-repeat="i in feed.entries | filter:query | orderBy:orderProp">
        <md-content class="np-layout-list">
          <a ng-href="{{i.id}}/show" ng-repeat="title in i.titles" ng-if="title.lang == lang">
            <md-list>
              <md-list-item class="md-2-line">
                <div class="md-list-item-text">
                  <h3 class="md-headline">
                    {{ title.title || i.id }}
                  </h3>
                  <h4>{{i.parameters.length || 0 }} parameter{{i.parameters.length == 1 ? "" : "s"}}</h4>
                </div>
              </md-list-item>
            </md-list>
            <md-divider></md-divider>
          </a>

        </md-content>
      </div>

      <div layout-padding>
        <div ng-if="feed.opensearch.totalResults > 0" layout layout-align="space-between center">
          <div style="line-height: 48px;">{{feed.opensearch.totalResults}} results, displaying {{ (feed.entries | filter:query).length}}</div>
          <div><md-button class="md-raised md-primary" ng-if="showNext()" ng-click="next()">More ...</md-button></div>
        </div>
        <div ng-if="feed.opensearch.totalResults == 0">No results when searching for "{{q()}}"</div>
      </div>
    </section>
  </md-content>
</div>
